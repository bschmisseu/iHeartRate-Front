{"ast":null,"code":"import _slicedToArray from\"/Users/bryceschmisseur/Desktop/IHeartRate/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{makeStyles}from'@material-ui/core/styles';import Grid from'@material-ui/core/Grid';import SideBar from'./../components/nav/SideBar';import Table from'@material-ui/core/Table';import Footer from'./../components/nav/Footer';import HeartRateService from'./../services/HeartRateService';import moment from'moment';import Paper from'@material-ui/core/Paper';import TableBody from'@material-ui/core/TableBody';import TableCell from'@material-ui/core/TableCell';import TableContainer from'@material-ui/core/TableContainer';import TableHead from'@material-ui/core/TableHead';import TablePagination from'@material-ui/core/TablePagination';import TableRow from'@material-ui/core/TableRow';import Button from'@material-ui/core/Button';import Chartkick,{LineChart}from'react-chartkick';import Highcharts from'highcharts';import List from'@material-ui/core/List';import ListItem from'@material-ui/core/ListItem';import ListItemIcon from'@material-ui/core/ListItemIcon';import ListItemText from'@material-ui/core/ListItemText';import FavoriteIcon from'@material-ui/icons/Favorite';import Typography from'@material-ui/core/Typography';import Dialog from'@material-ui/core/Dialog';import DialogActions from'@material-ui/core/DialogActions';import DialogContent from'@material-ui/core/DialogContent';import DialogContentText from'@material-ui/core/DialogContentText';import DialogTitle from'@material-ui/core/DialogTitle';import DateFnsUtils from'@date-io/date-fns';import'date-fns';import{MuiPickersUtilsProvider,KeyboardTimePicker,KeyboardDatePicker}from'@material-ui/pickers';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";Chartkick.use(Highcharts);var useStyles=makeStyles(function(theme){return{gridRight:{padding:'25px'},heading:{marginBottom:'0px'},rootTable:{width:'100%'},containerTable:{maxHeight:465,minHeight:465},rootHead:{flexGrow:1},welcome:{textAlign:'left',fontWeight:'250',fontSize:'28px'},signIn:{textAlign:'right',fontWeight:'250'},button:{background:'linear-gradient(#ac1c13, #bf4342)',color:'white',fontFamily:'-apple-system-body, BlinkMacSystemFont, sans-serif',fontWeight:'300'},rootChart:{width:'100%',padding:'0px'},chartTitle:{fontFamily:'-apple-system-body, BlinkMacSystemFont, sans-serif',fontWeight:'300',fontSize:'24px',textAlign:'center',padding:'10px'},titleRate:{fontFamily:'-apple-system-body, BlinkMacSystemFont, sans-serif',fontWeight:'300',fontSize:'18px',textAlign:'center',padding:'0px'},listLabelRate:{fontFamily:'-apple-system-body, BlinkMacSystemFont, sans-serif',fontWeight:'100',fontSize:'23px',textAlign:'left'},form:{display:'flex',flexDirection:'column',margin:'auto',width:'fit-content'},formControl:{marginTop:theme.spacing(2),minWidth:120},formControlLabel:{marginTop:theme.spacing(1)}};});var columns=[{id:'bpm',label:'Beats per Minute',align:'center'},{id:'date',label:'Date/Time Recorded',minWidth:170,align:'center',format:function format(value){return moment(value).day();}}];function createData(unNum,bpm,date){return{unNum:unNum,bpm:bpm,date:date};}export default function Dashboard(){var classes=useStyles();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),heartData=_useState2[0],setHeartData=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),rows=_useState4[0],setRows=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),page=_useState6[0],setPage=_useState6[1];var _useState7=useState(10),_useState8=_slicedToArray(_useState7,2),rowsPerPage=_useState8[0],setRowsPerPage=_useState8[1];var _useState9=useState(JSON.parse(\"{}\")),_useState10=_slicedToArray(_useState9,2),data=_useState10[0],setData=_useState10[1];var _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),avgRate=_useState12[0],setAvgRate=_useState12[1];var _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),lastRec=_useState14[0],setLastRec=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),open=_useState16[0],setOpen=_useState16[1];var _useState17=useState(new Date()),_useState18=_slicedToArray(_useState17,2),selectedDateFrom=_useState18[0],setSelectedDateFrom=_useState18[1];var _useState19=useState(new Date()),_useState20=_slicedToArray(_useState19,2),selectedDateTo=_useState20[0],setSelectedDateTo=_useState20[1];useEffect(function(){HeartRateService.getUsers('001072.b2df559565e4408586c5ff8852b01b65.0530').then(function(response){var arr=[];Object.keys(response.data).forEach(function(key){var currDate=moment(response.data[key].date.substring(0,19));var HeartRate={bpm:response.data[key].bpm,date:currDate,user_id:response.data[key].userid};arr.push(HeartRate);});var arrTable=arr.reverse();setLastRec(arrTable[0].bpm);setHeartData(arrTable);var data=[];for(var i=0;i<arrTable.length;i++){data.push(createData(i,arrTable[i].bpm,arrTable[i].date.format('lll')));}setRows(data);var chartdata=\"{\";var currAveRate=0;for(var _i=0;_i<10;_i++){currAveRate+=arrTable[_i].bpm;chartdata+='\"'+arrTable[_i].date.format('')+'\": '+arrTable[_i].bpm;if(_i!==9){chartdata+=\",\";}}chartdata+=\"}\";setData(JSON.parse(chartdata));setAvgRate(Math.round(currAveRate/10));});},[]);var updateGraph=function updateGraph(newPage,rowsPerPageNew,arr){var chartdata=\"{\";var currAveRate=0;var count=0;if(rowsPerPageNew!==-1){for(var i=newPage*rowsPerPageNew;i<rowsPerPageNew*newPage+rowsPerPageNew;i++){if(i>arr.length-1){break;}currAveRate+=arr[i].bpm;chartdata+='\"'+arr[i].date.format('')+'\": '+arr[i].bpm+',';count++;}}else{for(var _i2=0;_i2<arr.length;_i2++){currAveRate+=arr[_i2].bpm;chartdata+='\"'+arr[_i2].date.format('')+'\": '+arr[_i2].bpm+',';count++;}}chartdata=chartdata.substring(0,chartdata.length-1);chartdata+=\"}\";setData(JSON.parse(chartdata));setAvgRate(Math.round(currAveRate/count));};var handleChangePage=function handleChangePage(event,newPage){setPage(newPage);updateGraph(newPage,rowsPerPage,heartData);};var handleChangeRowsPerPage=function handleChangeRowsPerPage(event){setRowsPerPage(+event.target.value);setPage(0);updateGraph(0,+event.target.value,heartData);};var handleReset=function handleReset(){setOpen(false);var data=[];for(var i=0;i<heartData.length;i++){data.push(createData(i,heartData[i].bpm,heartData[i].date.format('lll')));}setRows(data);var chartdata=\"{\";var currAveRate=0;for(var _i3=0;_i3<10;_i3++){currAveRate+=heartData[_i3].bpm;chartdata+='\"'+heartData[_i3].date.format('')+'\": '+heartData[_i3].bpm;if(_i3!==9){chartdata+=\",\";}}chartdata+=\"}\";setData(JSON.parse(chartdata));setAvgRate(Math.round(currAveRate/10));setPage(0);setRowsPerPage(10);};var handleClickOpen=function handleClickOpen(){setOpen(true);};var handleClose=function handleClose(){setOpen(false);var dateFrom=moment(selectedDateFrom);var dateTo=moment(selectedDateTo);if(dateFrom.isAfter(dateTo)||dateTo.isBefore(dateFrom)){alert(\"The date start must not be after the end date or the end date must not be before the start date!\");}else{console.log(\"Hello\");var tableData=[];var chartData=\"{\";var heartRates=0;var numRates=0;for(var i=0;i<heartData.length;i++){var currDate=heartData[i].date;if(currDate.isAfter(dateFrom)&&currDate.isBefore(dateTo)){heartRates+=heartData[i].bpm;numRates++;tableData.push(createData(i,heartData[i].bpm,heartData[i].date.format('lll')));chartData+='\"'+heartData[i].date.format('')+'\": '+heartData[i].bpm+',';}}if(numRates>0){setAvgRate(Math.round(heartRates/numRates));chartData=chartData.substring(0,chartData.length-1);chartData+=\"}\";setRows(tableData);setData(JSON.parse(chartData));setPage(0);setRowsPerPage(-1);}else{console.log(\"No data found between those dates\");}}};var handleDateChangeFrom=function handleDateChangeFrom(date){setSelectedDateFrom(date);};var handleDateChangeTo=function handleDateChangeTo(date){setSelectedDateTo(date);};return/*#__PURE__*/_jsxs(\"div\",{className:classes.root,children:[/*#__PURE__*/_jsxs(Grid,{container:true,children:[/*#__PURE__*/_jsx(Grid,{children:/*#__PURE__*/_jsx(SideBar,{})}),/*#__PURE__*/_jsx(Grid,{lg:10,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.gridRight,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.heading,children:/*#__PURE__*/_jsx(\"div\",{className:classes.rootHead,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsxs(Grid,{className:classes.welcome,item:true,xs:6,children:[\"Welcome, Bryce Schmisseur\",/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'20px'},children:\"This is your Dashboard\"})]}),/*#__PURE__*/_jsx(Grid,{className:classes.signIn,item:true,xs:6,children:/*#__PURE__*/_jsx(Button,{className:classes.button,onClick:handleClickOpen,children:\"Select Dates\"})})]})})}),/*#__PURE__*/_jsxs(Grid,{container:true,children:[/*#__PURE__*/_jsx(Grid,{className:classes.gridRight,xs:6,children:/*#__PURE__*/_jsxs(Paper,{className:classes.rootTable,children:[/*#__PURE__*/_jsx(TableContainer,{className:classes.containerTable,children:/*#__PURE__*/_jsxs(Table,{stickyHeader:true,\"aria-label\":\"sticky table\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsx(TableRow,{children:columns.map(function(column){return/*#__PURE__*/_jsx(TableCell,{align:column.align,style:{minWidth:column.minWidth},children:column.label},column.id);})})}),/*#__PURE__*/_jsx(TableBody,{id:\"currentRows\",children:(rowsPerPage>0?rows.slice(page*rowsPerPage,page*rowsPerPage+rowsPerPage):rows).map(function(row){return/*#__PURE__*/_jsx(TableRow,{hover:true,role:\"checkbox\",tabIndex:-1,children:columns.map(function(column){var value=row[column.id];return/*#__PURE__*/_jsx(TableCell,{align:column.align,children:column.format&&typeof value==='number'?column.format(value):value},column.id);})},row.unNum);})})]})}),/*#__PURE__*/_jsx(TablePagination,{rowsPerPageOptions:[10,25,100,{label:'All',value:-1}],component:\"div\",count:rows.length,rowsPerPage:rowsPerPage>0?rowsPerPage:rows.length,page:page,onChangePage:handleChangePage,onChangeRowsPerPage:handleChangeRowsPerPage})]})}),/*#__PURE__*/_jsxs(Grid,{className:classes.gridRight,xs:6,children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Paper,{className:classes.rootGraph,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.chartTitle,children:\"BPM VS Time\"}),/*#__PURE__*/_jsx(LineChart,{messages:{empty:\"No data\"},titel:\"Heart Rate\",ytitle:\"Beats per Minute (BPM)\",xtitle:\"Date Time\",data:data})]})}),/*#__PURE__*/_jsxs(Grid,{container:true,children:[/*#__PURE__*/_jsx(Grid,{className:classes.gridRight,xs:6,children:/*#__PURE__*/_jsxs(Paper,{style:{padding:'15px'},children:[/*#__PURE__*/_jsx(\"div\",{className:classes.titleRate,children:\"Average Heart Rate\"}),/*#__PURE__*/_jsx(List,{children:/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemIcon,{style:{fontSize:'large'},children:/*#__PURE__*/_jsx(FavoriteIcon,{})}),/*#__PURE__*/_jsx(ListItemText,{children:/*#__PURE__*/_jsxs(Typography,{className:classes.listLabelRate,children:[avgRate,\" BPM\"]})})]})})]})}),/*#__PURE__*/_jsx(Grid,{className:classes.gridRight,xs:6,children:/*#__PURE__*/_jsxs(Paper,{style:{padding:'15px'},children:[/*#__PURE__*/_jsx(\"div\",{className:classes.titleRate,children:\"Last Recorded\"}),/*#__PURE__*/_jsx(List,{children:/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemIcon,{style:{fontSize:'large'},children:/*#__PURE__*/_jsx(FavoriteIcon,{})}),/*#__PURE__*/_jsx(ListItemText,{children:/*#__PURE__*/_jsxs(Typography,{className:classes.listLabelRate,children:[lastRec,\" BPM\"]})})]})})]})})]})]})]}),/*#__PURE__*/_jsx(Footer,{})]})})]}),/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsxs(Dialog,{open:open,onClose:handleClose,\"aria-labelledby\":\"max-width-dialog-title\",children:[/*#__PURE__*/_jsx(DialogTitle,{id:\"max-width-dialog-title\",children:\"Date Selector\"}),/*#__PURE__*/_jsxs(DialogContent,{children:[/*#__PURE__*/_jsx(DialogContentText,{children:\"Please select any two dates that you would like to pull information from:\"}),/*#__PURE__*/_jsx(\"form\",{className:classes.form,noValidate:true,children:/*#__PURE__*/_jsxs(MuiPickersUtilsProvider,{utils:DateFnsUtils,children:[/*#__PURE__*/_jsx(DialogContentText,{children:\"Start Date:\"}),/*#__PURE__*/_jsxs(Grid,{container:true,justify:\"space-around\",children:[/*#__PURE__*/_jsx(KeyboardDatePicker,{margin:\"normal\",id:\"date-picker-dialog\",label:\"Date\",format:\"MM/dd/yyyy\",value:selectedDateFrom,onChange:handleDateChangeFrom,KeyboardButtonProps:{'aria-label':'change date'}}),/*#__PURE__*/_jsx(KeyboardTimePicker,{margin:\"normal\",id:\"time-picker\",label:\"Time\",value:selectedDateFrom,onChange:handleDateChangeFrom,KeyboardButtonProps:{'aria-label':'change time'}})]}),/*#__PURE__*/_jsx(DialogContentText,{children:\"End Date:\"}),/*#__PURE__*/_jsxs(Grid,{container:true,justify:\"space-around\",children:[/*#__PURE__*/_jsx(KeyboardDatePicker,{margin:\"normal\",id:\"date-picker-dialog\",label:\"Date\",format:\"MM/dd/yyyy\",value:selectedDateTo,onChange:handleDateChangeTo,KeyboardButtonProps:{'aria-label':'change date'}}),/*#__PURE__*/_jsx(KeyboardTimePicker,{margin:\"normal\",id:\"time-picker\",label:\"Time\",value:selectedDateTo,onChange:handleDateChangeTo,KeyboardButtonProps:{'aria-label':'change time'}})]})]})})]}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleReset,color:\"primary\",children:\"Reset\"}),/*#__PURE__*/_jsx(Button,{onClick:handleClose,color:\"primary\",children:/*#__PURE__*/_jsx(\"b\",{children:\"Select\"})})]})]})})]});}","map":{"version":3,"sources":["/Users/bryceschmisseur/Desktop/IHeartRate/frontend/src/pages/Dashboard.js"],"names":["React","useState","useEffect","makeStyles","Grid","SideBar","Table","Footer","HeartRateService","moment","Paper","TableBody","TableCell","TableContainer","TableHead","TablePagination","TableRow","Button","Chartkick","LineChart","Highcharts","List","ListItem","ListItemIcon","ListItemText","FavoriteIcon","Typography","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","DateFnsUtils","MuiPickersUtilsProvider","KeyboardTimePicker","KeyboardDatePicker","use","useStyles","theme","gridRight","padding","heading","marginBottom","rootTable","width","containerTable","maxHeight","minHeight","rootHead","flexGrow","welcome","textAlign","fontWeight","fontSize","signIn","button","background","color","fontFamily","rootChart","chartTitle","titleRate","listLabelRate","form","display","flexDirection","margin","formControl","marginTop","spacing","minWidth","formControlLabel","columns","id","label","align","format","value","day","createData","unNum","bpm","date","Dashboard","classes","heartData","setHeartData","rows","setRows","page","setPage","rowsPerPage","setRowsPerPage","JSON","parse","data","setData","avgRate","setAvgRate","lastRec","setLastRec","open","setOpen","Date","selectedDateFrom","setSelectedDateFrom","selectedDateTo","setSelectedDateTo","getUsers","then","response","arr","Object","keys","forEach","key","currDate","substring","HeartRate","user_id","userid","push","arrTable","reverse","i","length","chartdata","currAveRate","Math","round","updateGraph","newPage","rowsPerPageNew","count","handleChangePage","event","handleChangeRowsPerPage","target","handleReset","handleClickOpen","handleClose","dateFrom","dateTo","isAfter","isBefore","alert","console","log","tableData","chartData","heartRates","numRates","handleDateChangeFrom","handleDateChangeTo","root","map","column","slice","row","rootGraph","empty"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport SideBar from './../components/nav/SideBar';\nimport Table from '@material-ui/core/Table';\nimport Footer from './../components/nav/Footer';\nimport HeartRateService from './../services/HeartRateService';\nimport moment from 'moment';\nimport Paper from '@material-ui/core/Paper';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TablePagination from '@material-ui/core/TablePagination';\nimport TableRow from '@material-ui/core/TableRow';\nimport Button from '@material-ui/core/Button';\nimport Chartkick, { LineChart } from 'react-chartkick';\nimport Highcharts from 'highcharts';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport Typography from '@material-ui/core/Typography';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DateFnsUtils from '@date-io/date-fns';\nimport 'date-fns';\nimport {\n  MuiPickersUtilsProvider,\n  KeyboardTimePicker,\n  KeyboardDatePicker,\n} from '@material-ui/pickers';\n\nChartkick.use(Highcharts);\n\nconst useStyles = makeStyles((theme) => ({\n  gridRight: {\n      padding: '25px',\n  },\n  heading: {\n      marginBottom: '0px',\n  },\n  rootTable: {\n    width: '100%',\n\n  },\n  containerTable: {\n    maxHeight: 465,\n    minHeight: 465,\n  },\n  rootHead: {\n    flexGrow: 1,\n  },\n  welcome: {\n    textAlign: 'left',\n    fontWeight: '250',\n    fontSize: '28px'\n  },\n  signIn: {\n    textAlign: 'right',\n    fontWeight: '250',\n  },\n  button: {\n    background: 'linear-gradient(#ac1c13, #bf4342)',\n    color: 'white',\n    fontFamily: '-apple-system-body, BlinkMacSystemFont, sans-serif',\n    fontWeight: '300',\n  },\n  rootChart: {\n    width: '100%',\n    padding: '0px',\n  },\n  chartTitle: {\n      fontFamily: '-apple-system-body, BlinkMacSystemFont, sans-serif',\n      fontWeight: '300',\n      fontSize: '24px',\n      textAlign: 'center',\n      padding: '10px'\n  },\n  titleRate: {\n    fontFamily: '-apple-system-body, BlinkMacSystemFont, sans-serif',\n    fontWeight: '300',\n    fontSize: '18px',\n    textAlign: 'center',\n    padding: '0px'\n    },\n    listLabelRate: {\n        fontFamily: '-apple-system-body, BlinkMacSystemFont, sans-serif',\n        fontWeight: '100',\n        fontSize: '23px',\n        textAlign: 'left'\n    },\n    form: {\n        display: 'flex',\n        flexDirection: 'column',\n        margin: 'auto',\n        width: 'fit-content',\n    },\n    formControl: {\n        marginTop: theme.spacing(2),\n        minWidth: 120,\n    },\n    formControlLabel: {\n        marginTop: theme.spacing(1),\n    },\n}));\n\nconst columns = [\n    { \n      id: 'bpm', \n      label: 'Beats per Minute',\n      align: 'center' \n      },\n    {\n      id: 'date',\n      label: 'Date/Time Recorded',\n      minWidth: 170,\n      align: 'center',\n      format: (value) => moment(value).day(),\n    },\n  ];\n\nfunction createData(unNum, bpm, date) {\n    return {unNum, bpm, date };\n}\n\nexport default function Dashboard() {\n  const classes = useStyles();\n\n  const [heartData, setHeartData] = useState([]);\n  const [rows, setRows] = useState([]);\n  const [page, setPage] = useState(0);\n  const [rowsPerPage, setRowsPerPage] = useState(10);\n  const [data, setData] = useState(JSON.parse(\"{}\"));\n  const [avgRate, setAvgRate] = useState(0);\n  const [lastRec, setLastRec] = useState(0);\n  const [open, setOpen] = useState(false);\n  const [selectedDateFrom, setSelectedDateFrom] = useState(new Date());\n  const [selectedDateTo, setSelectedDateTo] = useState(new Date());\n\n    useEffect(() => {\n        HeartRateService.getUsers('001072.b2df559565e4408586c5ff8852b01b65.0530').then(response => {\n            let arr = [];\n            Object.keys(response.data).forEach(function(key) {\n                let currDate = moment(response.data[key].date.substring(0, 19));\n                let HeartRate = {\n                    bpm: response.data[key].bpm,\n                    date: currDate,\n                    user_id: response.data[key].userid\n                }\n                arr.push(HeartRate);\n            });\n            let arrTable = arr.reverse();\n            setLastRec(arrTable[0].bpm);\n            setHeartData(arrTable);\n            let data = [];\n            for(let i = 0; i < arrTable.length; i++){\n              data.push(createData(i, arrTable[i].bpm, arrTable[i].date.format('lll')));\n            }\n            setRows(data);\n            let chartdata = \"{\";\n            let currAveRate = 0;\n            for(let i = 0; i < 10; i++){\n                currAveRate += arrTable[i].bpm;\n                chartdata += '\"' + arrTable[i].date.format('') + '\": ' + arrTable[i].bpm;\n                if(i !== 9){\n                    chartdata += \",\";\n                }\n            }\n            chartdata += \"}\"\n            setData(JSON.parse(chartdata));\n            setAvgRate(Math.round(currAveRate / 10));\n        })\n    }, [])\n\n    const updateGraph = (newPage, rowsPerPageNew, arr) => {\n        let chartdata = \"{\";\n        let currAveRate = 0;\n        let count = 0;\n        if(rowsPerPageNew !== -1)\n        {\n            for(let i = (newPage * rowsPerPageNew); i < ((rowsPerPageNew * newPage) + rowsPerPageNew); i++){\n                if(i > arr.length - 1)\n                {\n                    break; \n                }\n                currAveRate += arr[i].bpm;\n                chartdata += '\"' + arr[i].date.format('') + '\": ' + arr[i].bpm + ',';\n                count++;\n            }\n        } else {\n            for(let i = 0; i < arr.length; i++){\n                currAveRate += arr[i].bpm;\n                chartdata += '\"' + arr[i].date.format('') + '\": ' + arr[i].bpm + ',';\n                count++;\n            }\n        }\n        chartdata = chartdata.substring(0, chartdata.length - 1)\n        chartdata += \"}\"\n        setData(JSON.parse(chartdata));\n        setAvgRate(Math.round(currAveRate / count));\n    }\n\n    const handleChangePage = (event, newPage) => {\n        setPage(newPage);\n        updateGraph(newPage, rowsPerPage, heartData);\n    };\n\n    const handleChangeRowsPerPage = (event) => {\n        setRowsPerPage(+event.target.value);\n        setPage(0);\n        updateGraph(0, +event.target.value, heartData);\n    };\n\n    const handleReset = () => {\n        setOpen(false);\n        let data = [];\n        for(let i = 0; i < heartData.length; i++){\n            data.push(createData(i, heartData[i].bpm, heartData[i].date.format('lll')));\n        }\n        setRows(data);\n        let chartdata = \"{\";\n        let currAveRate = 0;\n        for(let i = 0; i < 10; i++){\n            currAveRate += heartData[i].bpm;\n            chartdata += '\"' + heartData[i].date.format('') + '\": ' + heartData[i].bpm;\n            if(i !== 9){\n                chartdata += \",\";\n            }\n        }\n        chartdata += \"}\"\n        setData(JSON.parse(chartdata));\n        setAvgRate(Math.round(currAveRate / 10));\n        setPage(0);\n        setRowsPerPage(10);\n    }\n\n    const handleClickOpen = () => {\n        setOpen(true);\n      };\n    \n      const handleClose = () => {\n        setOpen(false);\n        let dateFrom = moment(selectedDateFrom);\n        let dateTo = moment(selectedDateTo);\n        if(dateFrom.isAfter(dateTo) || dateTo.isBefore(dateFrom)){\n            alert(\"The date start must not be after the end date or the end date must not be before the start date!\");\n        } else {\n            console.log(\"Hello\")\n            let tableData = [];\n            let chartData = \"{\";\n            let heartRates = 0;\n            let numRates = 0;\n            for(let i = 0; i < heartData.length; i++){\n                let currDate = heartData[i].date;\n                if(currDate.isAfter(dateFrom) && currDate.isBefore(dateTo)){\n                    heartRates += heartData[i].bpm;\n                    numRates++;\n                    tableData.push(createData(i, heartData[i].bpm, heartData[i].date.format('lll')));\n                    chartData += '\"' + heartData[i].date.format('') + '\": ' + heartData[i].bpm + ',';\n                }\n            }\n            if (numRates > 0) {\n                setAvgRate(Math.round(heartRates / numRates))\n                chartData = chartData.substring(0, chartData.length - 1)\n                chartData += \"}\"\n                setRows(tableData);\n                setData(JSON.parse(chartData));\n                setPage(0);\n                setRowsPerPage(-1);\n            } else {\n                console.log(\"No data found between those dates\");\n            }\n        }\n      };\n\n    const handleDateChangeFrom = (date) => {\n        setSelectedDateFrom(date);\n    };\n\n    const handleDateChangeTo = (date) => {\n        setSelectedDateTo(date);\n    };\n\n  return (\n    <div className={classes.root}>\n      <Grid container>\n        <Grid>\n            <SideBar />\n        </Grid>\n        <Grid lg={10}>\n            <div className={classes.gridRight}>\n                <div className={classes.heading}>\n                    <div className={classes.rootHead}>\n                        <Grid container spacing={3}>\n                            <Grid className={classes.welcome} item xs={6}>\n                                Welcome, Bryce Schmisseur\n                                <div style={{fontSize: '20px'}}>This is your Dashboard</div>\n                            </Grid>\n                            <Grid className={classes.signIn} item xs={6}>\n                            <Button className={classes.button} onClick={handleClickOpen}>Select Dates</Button>\n                            </Grid>\n                        </Grid>\n                    </div>\n                </div>\n                <Grid container>\n                    <Grid className={classes.gridRight} xs={6}>\n                        <Paper className={classes.rootTable}>\n                        <TableContainer className={classes.containerTable}>\n                            <Table stickyHeader aria-label=\"sticky table\">\n                            <TableHead>\n                                <TableRow>\n                                {columns.map((column) => (\n                                    <TableCell\n                                    key={column.id}\n                                    align={column.align}\n                                    style={{ minWidth: column.minWidth }}\n                                    >\n                                    {column.label}\n                                    </TableCell>\n                                ))}\n                                </TableRow>\n                            </TableHead>\n                            <TableBody id=\"currentRows\">\n                                {(rowsPerPage > 0\n                                    ? rows.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\n                                    : rows).map((row) => {\n                                return (\n                                    <TableRow hover role=\"checkbox\" tabIndex={-1} key={row.unNum}>\n                                    {columns.map((column) => {\n                                        const value = row[column.id];\n                                        return (\n                                        <TableCell key={column.id} align={column.align}>\n                                            {column.format && typeof value === 'number' ? column.format(value) : value}\n                                        </TableCell>\n                                        );\n                                    })}\n                                    </TableRow>\n                                );\n                                })}\n                            </TableBody>\n                            </Table>\n                        </TableContainer>\n                        <TablePagination\n                            rowsPerPageOptions={[10, 25, 100, { label: 'All', value: -1 }]}\n                            component=\"div\"\n                            count={rows.length}\n                            rowsPerPage={rowsPerPage > 0 ? rowsPerPage : rows.length}\n                            page={page}\n                            onChangePage={handleChangePage}\n                            onChangeRowsPerPage={handleChangeRowsPerPage}\n                        />\n                        </Paper>\n                    </Grid>\n                    <Grid className={classes.gridRight} xs={6}>\n                        <div>\n                            <Paper className={classes.rootGraph}>\n                                <div className={classes.chartTitle}>\n                                    BPM VS Time\n                                </div>\n                            <LineChart \n                                \n                                messages={{empty: \"No data\"}}\n                                titel = \"Heart Rate\"\n                                ytitle= \"Beats per Minute (BPM)\"\n                                xtitle= \"Date Time\"\n                                data={data} />\n                            </Paper>\n                        </div>\n                        <Grid container>\n                            <Grid className={classes.gridRight} xs={6}>\n                                <Paper style={{padding: '15px'}}>\n                                    <div className={classes.titleRate}>Average Heart Rate</div>\n                                    <List>\n                                        <ListItem>\n                                            <ListItemIcon style={{fontSize: 'large'}}><FavoriteIcon /></ListItemIcon>\n                                            <ListItemText><Typography className={classes.listLabelRate}>{avgRate} BPM</Typography></ListItemText>\n                                        </ListItem>\n                                    </List>\n                                </Paper>\n                            </Grid>\n                            <Grid className={classes.gridRight} xs={6}>\n                                <Paper style={{padding: '15px'}}>\n                                    <div className={classes.titleRate}>Last Recorded</div>\n                                    <List>\n                                        <ListItem>\n                                            <ListItemIcon style={{fontSize: 'large'}}><FavoriteIcon /></ListItemIcon>\n                                            <ListItemText><Typography className={classes.listLabelRate}>{lastRec} BPM</Typography></ListItemText>\n                                        </ListItem>\n                                    </List>\n                                </Paper>\n                            </Grid>\n                        </Grid>\n                    </Grid>\n                </Grid>\n                <Footer />\n            </div>\n        </Grid>\n      </Grid>\n      <React.Fragment>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"max-width-dialog-title\"\n      >\n        <DialogTitle id=\"max-width-dialog-title\">Date Selector</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Please select any two dates that you would like to pull information from:\n          </DialogContentText>\n          <form className={classes.form} noValidate>\n            <MuiPickersUtilsProvider utils={DateFnsUtils}>\n                <DialogContentText>\n                    Start Date:\n                </DialogContentText>\n                <Grid container justify=\"space-around\">\n                    <KeyboardDatePicker\n                        margin=\"normal\"\n                        id=\"date-picker-dialog\"\n                        label=\"Date\"\n                        format=\"MM/dd/yyyy\"\n                        value={selectedDateFrom}\n                        onChange={handleDateChangeFrom}\n                        KeyboardButtonProps={{\n                            'aria-label': 'change date',\n                        }}\n                    /> \n                    <KeyboardTimePicker\n                        margin=\"normal\"\n                        id=\"time-picker\"\n                        label=\"Time\"\n                        value={selectedDateFrom}\n                        onChange={handleDateChangeFrom}\n                        KeyboardButtonProps={{\n                            'aria-label': 'change time',\n                        }}\n                    />\n                </Grid>\n                <DialogContentText>\n                    End Date:\n                </DialogContentText>\n                <Grid container justify=\"space-around\">\n                    <KeyboardDatePicker\n                        margin=\"normal\"\n                        id=\"date-picker-dialog\"\n                        label=\"Date\"\n                        format=\"MM/dd/yyyy\"\n                        value={selectedDateTo}\n                        onChange={handleDateChangeTo}\n                        KeyboardButtonProps={{\n                            'aria-label': 'change date',\n                        }}\n                    /> \n                    <KeyboardTimePicker\n                        margin=\"normal\"\n                        id=\"time-picker\"\n                        label=\"Time\"\n                        value={selectedDateTo}\n                        onChange={handleDateChangeTo}\n                        KeyboardButtonProps={{\n                            'aria-label': 'change time',\n                        }}\n                    />\n                </Grid>\n            </MuiPickersUtilsProvider>\n          </form>\n        </DialogContent>\n        <DialogActions>\n            <Button onClick={handleReset} color=\"primary\">\n                Reset\n            </Button>\n          <Button onClick={handleClose} color=\"primary\">\n            <b>Select</b>\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </React.Fragment>\n    </div>\n  );\n}"]},"metadata":{},"sourceType":"module"}